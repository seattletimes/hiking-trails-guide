<!doctype html>
<html lang="en-US">
  <head>
    <%= t.include("partials/_head.html") %>
    <link rel="stylesheet" type="text/css" href="style.css">
    <%= t.include("partials/_nav.html") %>
  </head>
  <body>

     <%= t.include("partials/_ad.html", { type: "banner" }) %>

    <header>
    
      <h1>Guide to Washington&rsquo;s<span class="secondary">hiking trails</span></div></h1>
        <img class="header-image" src="./assets/hiking-trail.jpg">
    </header>
    <main>

      <p class="intro">
        Whether you like walks in the woods or multiday backpacks, “getting closer to nature” is a core value of many Washingtonians. Like a hiker on Mount Si, The Seattle Times keeps on pushing when it comes to covering old-favorite hikes as well as new discoveries. Here’s a collection of such reports – and we’ll keep adding more. Before any hike, check with <a href="www.wta.org">Washington Trails Association</a> for the latest on conditions and access. Happy trails!
      </p>

      <section class="trail-info">
        <div class="filters">

          <h3>Find a trail near you</h3>

          <div class="location-bar">
            Sort by proximity: 
            <input class="address" placeholder="Address?">
            <img class="gpsIcon" src="./assets/gps.svg">
            <button class="addressGo">GO</button>
          </div>

          <div class="mileage-region-container">
            <div class="searchByMileage">
              Search by mileage:
                <select class="milesFilter">
                  <option value = "">Show all</option>
                  <option value = "1;10">1 - 10</option>
                  <option value = "11;20">11 - 20</option>
                  <option value = "21;1000">21+</option>
                </select>
            </div>

          <!-- by region -->

          <%
            var regions = [];

            function isInArray(regions, region_name) {
              return regions.indexOf(region_name) > -1;
            }

            json.trails.forEach(function(k) {
              var region_name = k.region;
              if (!isInArray(regions, region_name)) {
                regions.push(region_name);
              }
            }) %>

          <div class="searchByRegion">
            Search by region:
              <select class="regionsList">
                <option value="">
                  Show all
                </option>
              <% for (var i=0; i < regions.length; i++) { %>
                <option value="<%= regions[i] %>">
                  <%= regions[i] %>
                </option>
              <% } %>
              </select>
            </div>
          </div>

          <!-- end of by region -->
        </div>

        <%
          json.trails.forEach(function(x) { %>

          <div miles="<%= x.miles %>" region="<%= x.region %>" class="trail">
            <h2><%= x.name %></h2>

            <ul class="trail-detail">
              <li>Distance: <%= x.miles %> miles, roundtrip</li>
              <li>Elevation gain: <%= x.elevation %> ft.</li>
            </ul>

              <div class="detail-map">
                <div class="img-caption-summary">
                  <% if (x.image) { %>
                  <img src="./assets/trailphotos/<%= x.image %>.jpg">
                  <p class="caption"><%= x.caption%></p>
                  <% } %>

                  <p class="summary">
                    <%= x.summary %>
                  </p>

                  <a href="<%= x.link %>" class="button">Read more</a>
                </div>

                <div class="map-container">
                  <leaflet-map zoom="7" lat="<%= x.lat %>" lng="<%= x.lng %>">
                    <tile-layer layer="esriTopographic"></tile-layer>
                      <map-options>
                       {
                         "scrollWheelZoom": false
                       }
              </map-options>
                    <map-marker class="locationMarker" lat="<%= x.lat %>" lng="<%= x.lng %>">
                      <b><u><%= x.name %></u></b>
                      <br><%= x.area %> - <%= x.region %>
                      <br><a href="https://www.google.com/maps/@<%= x.lat %>,<%= x.lng %>">Get directions</a>
                    </map-marker>
                  </leaflet-map>
                </div>
              </div>
            <hr>
          </div>

        <% });%>

        
      </section>

      <%= t.include("partials/_dontMiss.html", { data: json.elsewhere }) %>

    </main>

     <div class="bottom-ad"><%= t.include("partials/_ad.html", { type: "bannerBottom" }) %></div>

    <%= t.include("partials/_navBottom.html") %>

    <script>
      window.trails = <%= JSON.stringify(json.trails) %>;
    </script>

    <script src="app.js" async></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_foot.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
